c# mysql sql 优化


## 1 引起全表扫描的几种情况

参考: [据库中那些会引起全表扫描的SQL语句](http://www.xinyueseo.com/mysql/168.html)

1. 模糊查询
2. 查询条件中含有is null
3.查询条件中有不等于操作符（<>、!=）
4 or使用不当
5 组合索引 ( 排序时应按照组合索引中各列的顺序进行排序，即使索引中只有一个列是要排序的，否则排序性能会比较差。)
6 在where子句中使用参数
7 在where子句中对字段进行函数操作
8 不带任何条件的countSUBSTRING
9 Update 语句


## 什么情况可以使用全表扫描？
1. 单表查询
①表很小，索引可能就比表还大。
②访问的数据占全表数据的百分比很大，索引访问的总成本大于全表扫描的成本。
③相对于索引来说，表中的数据排列过于凌乱，表现出来就是索引的 clustering_factor 很大，导致索引的访问成本剧增。

2. 多表连接
①hash join的时候，内层表和外层表都可以使用全表扫描(对于某个单独的表的访问是否适用全表扫描，这个又回到了单表查询的情况)。
②nest loop的时候，外层表可以使用全表扫描，内层表一般不用全表扫描。












